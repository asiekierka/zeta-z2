var ZetaNative = (() => {
  var _scriptName = typeof document != 'undefined' ? document.currentScript?.src : undefined;
  
  return (
async function(moduleArg = {}) {
  var moduleRtn;

var b=moduleArg,d,l,p=new Promise((a,c)=>{d=a;l=c}),q=Object.assign({},b),r="",u;"undefined"!=typeof document&&document.currentScript&&(r=document.currentScript.src);_scriptName&&(r=_scriptName);r.startsWith("blob:")?r="":r=r.slice(0,r.replace(/[?#].*/,"").lastIndexOf("/")+1);u=async a=>{a=await fetch(a,{credentials:"same-origin"});if(a.ok)return a.arrayBuffer();throw Error(a.status+" : "+a.url);};var v=console.log.bind(console),w=console.error.bind(console);Object.assign(b,q);q=null;
var x,C=!1,D,E;function F(){var a=x.buffer;new Int8Array(a);new Int16Array(a);b.HEAPU8=D=new Uint8Array(a);new Uint16Array(a);new Int32Array(a);b.HEAPU32=E=new Uint32Array(a);new Float32Array(a);new Float64Array(a);new BigInt64Array(a);new BigUint64Array(a)}var G=0,H=null,I;async function J(a){try{var c=await u(a);return new Uint8Array(c)}catch{}throw"both async and sync fetching of the wasm failed";}
async function K(a,c){try{var e=await J(a);return await WebAssembly.instantiate(e,c)}catch(f){throw w(`failed to asynchronously prepare wasm: ${f}`),a=f,a="Aborted("+a+")",w(a),C=!0,a=new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info."),l(a),a;}}
async function N(a){var c=I;if("function"==typeof WebAssembly.instantiateStreaming)try{var e=fetch(c,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(e,a)}catch(f){w(`wasm streaming compile failed: ${f}`),w("falling back to ArrayBuffer instantiation")}return K(c,a)}
var O=[null,[],[]],P="undefined"!=typeof TextDecoder?new TextDecoder:void 0,Q=a=>{for(var c="";;){var e=D[a++];if(!e)return c;c+=String.fromCharCode(e)}},R={d:function(a){console.log(Q(a))},m:a=>{var c=D.length;a>>>=0;if(2147483648<a)return!1;for(var e=1;4>=e;e*=2){var f=c*(1+.2/e);f=Math.min(f,a+100663296);a:{f=(Math.min(2147483648,65536*Math.ceil(Math.max(a,f)/65536))-x.buffer.byteLength+65535)/65536|0;try{x.grow(f);F();var t=1;break a}catch(y){}t=void 0}if(t)return!0}return!1},o:()=>52,n:function(){return 70},
i:(a,c,e,f)=>{for(var t=0,y=0;y<e;y++){var T=E[c>>2],L=E[c+4>>2];c+=8;for(var z=0;z<L;z++){var g=D[T+z],A=O[a];if(0===g||10===g){g=A;for(var k=0,m=k+NaN,n=k;g[n]&&!(n>=m);)++n;if(16<n-k&&g.buffer&&P)g=P.decode(g.subarray(k,n));else{for(m="";k<n;){var h=g[k++];if(h&128){var B=g[k++]&63;if(192==(h&224))m+=String.fromCharCode((h&31)<<6|B);else{var M=g[k++]&63;h=224==(h&240)?(h&15)<<12|B<<6|M:(h&7)<<18|B<<12|M<<6|g[k++]&63;65536>h?m+=String.fromCharCode(h):(h-=65536,m+=String.fromCharCode(55296|h>>10,
56320|h&1023))}}else m+=String.fromCharCode(h)}g=m}(1===a?v:w)(g);A.length=0}else A.push(g)}t+=L}E[f>>2]=t;return 0},g:function(a){speakerg_off(a)},l:function(a,c){speakerg_on(a,c)},u:function(a){return vfsg_chdir(a)},v:function(a){return vfsg_close(a)},q:function(a,c,e){return vfsg_findfirst(a,c,e)},p:function(a){return vfsg_findnext(a)},t:function(a,c){return vfsg_getcwd(a,c)},j:function(a,c){return vfsg_open(a,c)},a:function(a,c,e){return vfsg_read(a,c,e)},c:function(a,c,e){return vfsg_seek(a,
c,e)},s:function(a,c){return vfsg_truncate(a,c)},r:function(a,c,e){return vfsg_write(a,c,e)},h:function(a){return vfsg_has_feature(a)},k:function(){return vfsg_time_ms()},b:function(a){return zetag_update_blink(a)},e:function(a,c,e){return zetag_update_charset(a,c,e)},f:function(a){return zetag_update_palette(a)}},S;(async function(){G++;var a={a:R};I??=r+"zeta_native.wasm";try{return S=(await N(a)).instance.exports,x=S.w,F(),G--,0==G&&H&&(a=H,H=null,a()),S}catch(c){return l(c),Promise.reject(c)}})();
b._zzt_get_ip=()=>(b._zzt_get_ip=S.z)();b._zzt_get_cycles=()=>(b._zzt_get_cycles=S.A)();b._zzt_kmod_get=()=>(b._zzt_kmod_get=S.B)();b._zzt_kmod_set=a=>(b._zzt_kmod_set=S.C)(a);b._zzt_kmod_clear=a=>(b._zzt_kmod_clear=S.D)(a);b._zzt_set_lock_charset=a=>(b._zzt_set_lock_charset=S.E)(a);b._zzt_set_lock_palette=a=>(b._zzt_set_lock_palette=S.F)(a);b._zzt_key_get_delay=()=>(b._zzt_key_get_delay=S.G)();b._zzt_key_get_repeat_delay=()=>(b._zzt_key_get_repeat_delay=S.H)();
b._zzt_key_set_delay=(a,c)=>(b._zzt_key_set_delay=S.I)(a,c);b._zzt_key=(a,c)=>(b._zzt_key=S.J)(a,c);b._zzt_keyup=a=>(b._zzt_keyup=S.K)(a);b._zzt_mark_frame=()=>(b._zzt_mark_frame=S.L)();b._zzt_joy_set=a=>(b._zzt_joy_set=S.M)(a);b._zzt_joy_clear=a=>(b._zzt_joy_clear=S.N)(a);b._zzt_joy_axis=(a,c)=>(b._zzt_joy_axis=S.O)(a,c);b._zzt_mouse_set=a=>(b._zzt_mouse_set=S.P)(a);b._zzt_mouse_clear=a=>(b._zzt_mouse_clear=S.Q)(a);b._zzt_mouse_axis=(a,c)=>(b._zzt_mouse_axis=S.R)(a,c);
b._zzt_get_charset_default=()=>(b._zzt_get_charset_default=S.S)();b._zzt_force_default_charset=a=>(b._zzt_force_default_charset=S.T)(a);b._zzt_load_charset=(a,c,e,f)=>(b._zzt_load_charset=S.U)(a,c,e,f);b._zzt_set_timer_offset=a=>(b._zzt_set_timer_offset=S.V)(a);b._zzt_set_max_extended_memory=a=>(b._zzt_set_max_extended_memory=S.W)(a);b._zzt_video_mode=()=>(b._zzt_video_mode=S.X)();b._zzt_load_palette_default=()=>(b._zzt_load_palette_default=S.Y)();b._zzt_key_pop=a=>(b._zzt_key_pop=S.Z)(a);
b._zzt_load_binary=(a,c)=>(b._zzt_load_binary=S._)(a,c);b._zzt_load_ega_palette=a=>(b._zzt_load_ega_palette=S.$)(a);b._zzt_load_palette=a=>(b._zzt_load_palette=S.aa)(a);b._zzt_load_blink=a=>(b._zzt_load_blink=S.ba)(a);b._zzt_get_active_blink_duration_ms=()=>(b._zzt_get_active_blink_duration_ms=S.ca)();b._zzt_get_screen_size=(a,c)=>(b._zzt_get_screen_size=S.da)(a,c);b._zzt_get_charset=(a,c)=>(b._zzt_get_charset=S.ea)(a,c);b._zzt_get_palette=()=>(b._zzt_get_palette=S.fa)();
b._zzt_get_blink=()=>(b._zzt_get_blink=S.ga)();b._zzt_get_blink_user_override=()=>(b._zzt_get_blink_user_override=S.ha)();b._zzt_set_blink_user_override=a=>(b._zzt_set_blink_user_override=S.ia)(a);b._zzt_get_blink_duration_ms=()=>(b._zzt_get_blink_duration_ms=S.ja)();b._zzt_set_blink_duration_ms=a=>(b._zzt_set_blink_duration_ms=S.ka)(a);b._zzt_init=a=>(b._zzt_init=S.la)(a);b._audio_set_remove_player_movement_sound=a=>(b._audio_set_remove_player_movement_sound=S.ma)(a);
b._zzt_execute=a=>(b._zzt_execute=S.na)(a);b._zzt_mark_timer=()=>(b._zzt_mark_timer=S.oa)();b._zzt_mark_timer_turbo=()=>(b._zzt_mark_timer_turbo=S.pa)();b._zzt_get_ram=()=>(b._zzt_get_ram=S.qa)();b._malloc=a=>(b._malloc=S.ra)(a);b._free=a=>(b._free=S.sa)(a);b._ui_activate=()=>(b._ui_activate=S.ta)();b._audio_stream_get_volume=()=>(b._audio_stream_get_volume=S.ua)();b._audio_get_remove_player_movement_sound=()=>(b._audio_get_remove_player_movement_sound=S.va)();
b._audio_stream_set_volume=a=>(b._audio_stream_set_volume=S.wa)(a);b._audio_stream_init=(a,c,e,f)=>(b._audio_stream_init=S.xa)(a,c,e,f);b._audio_stream_get_max_volume=()=>(b._audio_stream_get_max_volume=S.ya)();b._audio_stream_generate=(a,c,e)=>(b._audio_stream_generate=S.za)(a,c,e);b._audio_stream_append_on=(a,c,e)=>(b._audio_stream_append_on=S.Aa)(a,c,e);b._audio_local_delay_time=(a,c,e)=>(b._audio_local_delay_time=S.Ba)(a,c,e);
b._audio_should_insert_pause=(a,c)=>(b._audio_should_insert_pause=S.Ca)(a,c);b._audio_stream_append_off=(a,c)=>(b._audio_stream_append_off=S.Da)(a,c);b._audio_generate_init=()=>(b._audio_generate_init=S.Ea)();b._audio_get_note_delay=()=>(b._audio_get_note_delay=S.Fa)();b._audio_set_note_delay=a=>(b._audio_set_note_delay=S.Ga)(a);b.AsciiToString=Q;function U(){0<G?H=U:0<G?H=U:(b.calledRun=!0,C||(S.x(),d(b)))}U();moduleRtn=p;


  return moduleRtn;
}
);
})();
if (typeof exports === 'object' && typeof module === 'object') {
  module.exports = ZetaNative;
  // This default export looks redundant, but it allows TS to import this
  // commonjs style module.
  module.exports.default = ZetaNative;
} else if (typeof define === 'function' && define['amd'])
  define([], () => ZetaNative);
